<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FillMaster - DIAGNOSTICS</title>
    <style>
        body { background-color: #0f172a; color: white; font-family: sans-serif; padding: 20px; }
        #log-container {
            background: white; color: black; padding: 20px; border-radius: 8px;
            font-family: monospace; white-space: pre-wrap; border: 4px solid red;
            margin-top: 20px; min-height: 200px;
        }
        .status-ok { color: green; font-weight: bold; }
        .status-err { color: red; font-weight: bold; }
        h1 { color: #3b82f6; }
    </style>
</head>
<body>

    <h1>FillMaster Diagnosztika</h1>
    <p>Kérlek várj, a rendszer ellenőrzi a működési környezetet...</p>
    <div id="root"></div>
    
    <h3>Hibanapló (Kérlek ezt küldd el/olvasd el):</h3>
    <div id="log-container">Initializing logs...</div>

    <script>
        var logBox = document.getElementById('log-container');
        function log(msg, type) {
            var color = type === 'err' ? 'red' : (type === 'ok' ? 'green' : 'black');
            var prefix = type === 'err' ? '[HIBA] ' : (type === 'ok' ? '[OK] ' : '[INFO] ');
            logBox.innerHTML += '<div style="color:' + color + '">' + prefix + msg + '</div>';
        }

        // Globális hibaelkapó (ha a kód szintaktikai hibás)
        window.onerror = function(message, source, lineno, colno, error) {
            log("KRITIKUS HIBA: " + message + "\nHely: " + source + ":" + lineno, 'err');
            return true;
        };

        log("HTML betöltve.", 'info');
    </script>

    <script>log("React betöltése folyamatban (unpkg.com)...", 'info');</script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script>
        if (window.React) log("React sikeresen betöltve.", 'ok');
        else log("React NEM töltődött be! (Tűzfal blokkolja?)", 'err');
    </script>

    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script>
        if (window.ReactDOM) log("ReactDOM sikeresen betöltve.", 'ok');
        else log("ReactDOM NEM töltődött be!", 'err');
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        if (window.Babel) log("Babel sikeresen betöltve.", 'ok');
        else log("Babel NEM töltődött be! (Ezért nem fut a kód)", 'err');
    </script>

    <script src="config.js"></script>
    <script>
        if (window.APP_CONFIG) log("Config.js sikeresen betöltve.", 'ok');
        else log("Config.js HIÁNYZIK vagy hibás! (window.APP_CONFIG undefined)", 'err');
    </script>

    <script type="text/babel">
        try {
            log("React alkalmazás indítása...", 'info');
            
            const App = () => {
                return (
                    <div style={{padding: 20, background: '#1e293b', color: 'white', borderRadius: 10, marginTop: 20}}>
                        <h2>✅ A REACT MŰKÖDIK!</h2>
                        <p>Ha ezt a szürke dobozt látod, a kód futtatása sikeres.</p>
                        <p>A hiba valószínűleg a korábbi kódban volt (pl. egy elgépelés).</p>
                    </div>
                );
            };

            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<App />);
            log("ReactDOM.render meghívva.", 'ok');

        } catch (err) {
            log("React futtatási hiba: " + err.message, 'err');
        }
    </script>

</body>
</html>
